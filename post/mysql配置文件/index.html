<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>MySQL配置文详解 - 野生猿的笔记</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Wang" /><meta name="description" content="MySQL配置文件详解" /><meta name="keywords" content="mysql, 数据库, 配置文件" />






<meta name="generator" content="Hugo 0.84.0 with theme even" />


<link rel="canonical" href="https://wyc1282.github.io/post/mysql%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.2e81bbed97b8b282c1aeb57488cc71c8d8c8ec559f3931531bd396bf31e0d4dd.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="MySQL配置文详解" />
<meta property="og:description" content="MySQL配置文件详解" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://wyc1282.github.io/post/mysql%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-07-03T16:32:36&#43;08:00" />
<meta property="article:modified_time" content="2021-07-03T16:32:36&#43;08:00" />

<meta itemprop="name" content="MySQL配置文详解">
<meta itemprop="description" content="MySQL配置文件详解"><meta itemprop="datePublished" content="2021-07-03T16:32:36&#43;08:00" />
<meta itemprop="dateModified" content="2021-07-03T16:32:36&#43;08:00" />
<meta itemprop="wordCount" content="7517">
<meta itemprop="keywords" content="mysql,数据库,配置文件," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="MySQL配置文详解"/>
<meta name="twitter:description" content="MySQL配置文件详解"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Wang</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">主页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">档案</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">类别</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Wang</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">主页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">档案</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">类别</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">MySQL配置文详解</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-07-03 </span>
        <div class="post-category">
            <a href="/categories/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/"> 配置文件 </a>
            </div>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#mysql配置文件详解">MySQL配置文件详解</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <hr>
<h1 id="mysql配置文件详解">MySQL配置文件详解</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span><span class="lnt">297
</span><span class="lnt">298
</span><span class="lnt">299
</span><span class="lnt">300
</span><span class="lnt">301
</span><span class="lnt">302
</span><span class="lnt">303
</span><span class="lnt">304
</span><span class="lnt">305
</span><span class="lnt">306
</span><span class="lnt">307
</span><span class="lnt">308
</span><span class="lnt">309
</span><span class="lnt">310
</span><span class="lnt">311
</span><span class="lnt">312
</span><span class="lnt">313
</span><span class="lnt">314
</span><span class="lnt">315
</span><span class="lnt">316
</span><span class="lnt">317
</span><span class="lnt">318
</span><span class="lnt">319
</span><span class="lnt">320
</span><span class="lnt">321
</span><span class="lnt">322
</span><span class="lnt">323
</span><span class="lnt">324
</span><span class="lnt">325
</span><span class="lnt">326
</span><span class="lnt">327
</span><span class="lnt">328
</span><span class="lnt">329
</span><span class="lnt">330
</span><span class="lnt">331
</span><span class="lnt">332
</span><span class="lnt">333
</span><span class="lnt">334
</span><span class="lnt">335
</span><span class="lnt">336
</span><span class="lnt">337
</span><span class="lnt">338
</span><span class="lnt">339
</span><span class="lnt">340
</span><span class="lnt">341
</span><span class="lnt">342
</span><span class="lnt">343
</span><span class="lnt">344
</span><span class="lnt">345
</span><span class="lnt">346
</span><span class="lnt">347
</span><span class="lnt">348
</span><span class="lnt">349
</span><span class="lnt">350
</span><span class="lnt">351
</span><span class="lnt">352
</span><span class="lnt">353
</span><span class="lnt">354
</span><span class="lnt">355
</span><span class="lnt">356
</span><span class="lnt">357
</span><span class="lnt">358
</span><span class="lnt">359
</span><span class="lnt">360
</span><span class="lnt">361
</span><span class="lnt">362
</span><span class="lnt">363
</span><span class="lnt">364
</span><span class="lnt">365
</span><span class="lnt">366
</span><span class="lnt">367
</span><span class="lnt">368
</span><span class="lnt">369
</span><span class="lnt">370
</span><span class="lnt">371
</span><span class="lnt">372
</span><span class="lnt">373
</span><span class="lnt">374
</span><span class="lnt">375
</span><span class="lnt">376
</span><span class="lnt">377
</span><span class="lnt">378
</span><span class="lnt">379
</span><span class="lnt">380
</span><span class="lnt">381
</span><span class="lnt">382
</span><span class="lnt">383
</span><span class="lnt">384
</span><span class="lnt">385
</span><span class="lnt">386
</span><span class="lnt">387
</span><span class="lnt">388
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="c1"># 客户端设置
</span><span class="c1"></span><span class="p">[</span><span class="n">client</span><span class="p">]</span><span class="w">
</span><span class="w"></span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3306</span><span class="w">
</span><span class="w"></span><span class="c1"># 默认情况下，socket文件应为/usr/local/mysql/mysql.socket,所以可以ln -s xx  /tmp/mysql.sock
</span><span class="c1"></span><span class="n">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">mysql</span><span class="p">.</span><span class="n">sock</span><span class="w"> 
</span><span class="w">
</span><span class="w"></span><span class="c1"># 服务端设置
</span><span class="c1"></span><span class="p">[</span><span class="n">mysqld</span><span class="p">]</span><span class="w">
</span><span class="w"></span><span class="c1"># 基础信息
</span><span class="c1">#Mysql服务的唯一编号 每个mysql服务Id需唯一
</span><span class="c1"></span><span class="n">server</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">#服务端口号 默认3306
</span><span class="c1"></span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3306</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 启动mysql服务进程的用户
</span><span class="c1"></span><span class="k">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mysql</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 安装目录相关
</span><span class="c1"># mysql安装根目录
</span><span class="c1"></span><span class="n">basedir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">mysql</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># mysql数据文件所在位置
</span><span class="c1"></span><span class="n">datadir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">data</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 临时目录 比如load data infile会用到,一般都是使用/tmp
</span><span class="c1"></span><span class="n">tmpdir</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 设置socke文件地址
</span><span class="c1"></span><span class="n">socket</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">mysql</span><span class="p">.</span><span class="n">sock</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 事务隔离级别，默认为可重复读（REPEATABLE-READ）。（此级别下可能参数很多间隙锁，影响性能，但是修改又影响主从复制及灾难恢复，建议还是修改代码逻辑吧）
</span><span class="c1"># 隔离级别可选项目：READ-UNCOMMITTED  READ-COMMITTED  REPEATABLE-READ  SERIALIZABLE
</span><span class="c1"># transaction_isolation = READ-COMMITTED
</span><span class="c1"></span><span class="n">transaction_isolation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">REPEATABLE</span><span class="o">-</span><span class="k">READ</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 数据库引擎与字符集相关设置
</span><span class="c1"># 默认存储引擎是InnoDB
</span><span class="c1"></span><span class="n">default_storage_engine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InnoDB</span><span class="w">
</span><span class="w"></span><span class="c1"># 内存临时表默认存储引擎，默认InnoDB
</span><span class="c1"></span><span class="n">default_tmp_storage_engine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InnoDB</span><span class="w">
</span><span class="w"></span><span class="c1"># 磁盘临时表默认存储引擎，默认InnoDB
</span><span class="c1"></span><span class="n">internal_tmp_disk_storage_engine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InnoDB</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">#数据库默认字符集,主流字符集支持一些特殊表情符号（特殊表情符占用4个字节）
</span><span class="c1"></span><span class="k">character</span><span class="o">-</span><span class="kt">set</span><span class="o">-</span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">utf8</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">#数据库字符集对应一些排序等规则，注意要和character-set-server对应
</span><span class="c1"></span><span class="n">collation</span><span class="o">-</span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">utf8_general_ci</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 设置client连接mysql时的字符集,防止乱码
</span><span class="c1"># init_connect=&#39;SET NAMES utf8&#39;
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="c1"># 是否对sql语句大小写敏感，默认值为0，1表示不敏感
</span><span class="c1"></span><span class="n">lower_case_table_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 数据库连接相关设置
</span><span class="c1"># 最大连接数，可设最大值16384，一般考虑根据同时在线人数设置一个比较综合的数字，鉴于该数值增大并不太消耗系统资源，建议直接设10000
</span><span class="c1"># 如果在访问时经常出现Too Many Connections的错误提示，则需要增大该参数值
</span><span class="c1"></span><span class="n">max_connections</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10000</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 默认值100，最大错误连接数，如果有超出该参数值个数的中断错误连接，则该主机将被禁止连接。如需对该主机进行解禁，执行：FLUSH HOST
</span><span class="c1"># 考虑高并发场景下的容错，建议加大。
</span><span class="c1"></span><span class="n">max_connect_errors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># MySQL打开的文件描述符限制，默认最小1024;
</span><span class="c1"># 当open_files_limit没有被配置的时候，比较max_connections*5和ulimit -n的值，哪个大用哪个，
</span><span class="c1"># 当open_file_limit被配置的时候，比较open_files_limit和max_connections*5的值，哪个大用哪个。
</span><span class="c1"></span><span class="n">open_files_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">65535</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 注意：仍然可能出现报错信息Can&#39;t create a new thread；此时观察系统cat /proc/mysql进程号/limits，观察进程ulimit限制情况
</span><span class="c1"># 过小的话，考虑修改系统配置表，/etc/security/limits.conf和/etc/security/limits.d/90-nproc.conf
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="c1"># MySQL默认的wait_timeout  值为8个小时, interactive_timeout参数需要同时配置才能生效
</span><span class="c1"># MySQL连接闲置超过一定时间后(单位：秒，此处为1800秒)将会被强行关闭
</span><span class="c1"></span><span class="n">interactive_timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1800</span><span class="w"> 
</span><span class="w"></span><span class="n">wait_timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1800</span><span class="w"> 
</span><span class="w">
</span><span class="w"></span><span class="c1"># 在MySQL暂时停止响应新请求之前的短时间内多少个请求可以被存在堆栈中 
</span><span class="c1"># 官方建议back_log = 50 + (max_connections / 5),封顶数为900
</span><span class="c1"></span><span class="n">back_log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">900</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 数据库数据交换设置
</span><span class="c1"># 该参数限制服务器端，接受的数据包大小，如果有BLOB子段，建议增大此值，避免写入或者更新出错。有BLOB子段，建议改为1024M
</span><span class="c1"></span><span class="n">max_allowed_packet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">128</span><span class="n">M</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 内存，cache与buffer设置
</span><span class="c1"># 内存临时表的最大值,默认16M，此处设置成128M
</span><span class="c1"></span><span class="n">tmp_table_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">128</span><span class="n">M</span><span class="w">
</span><span class="w"></span><span class="c1"># 用户创建的内存表的大小，默认16M，往往和tmp_table_size一起设置，限制用户临师表大小。
</span><span class="c1"># 超限的话，MySQL就会自动地把它转化为基于磁盘的MyISAM表，存储在指定的tmpdir目录下，增大IO压力，建议内存大，增大该数值。
</span><span class="c1"></span><span class="n">max_heap_table_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">64</span><span class="n">M</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 表示这个mysql版本是否支持查询缓存。ps：SHOW STATUS LIKE &#39;qcache%&#39;，与缓存相关的状态变量。
</span><span class="c1"># have_query_cache
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="c1"># 这个系统变量控制着查询缓存工能的开启的关闭，0时表示关闭，1时表示打开，2表示只要select 中明确指定SQL_CACHE才缓存。
</span><span class="c1"># 看业务场景决定是否使用缓存，不使用，下面就不用配置了。
</span><span class="c1"></span><span class="n">query_cache_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> 
</span><span class="w">
</span><span class="w"></span><span class="c1"># 默认值1M，优点是查询缓冲可以极大的提高服务器速度, 如果你有大量的相同的查询并且很少修改表。
</span><span class="c1"># 缺点：在你表经常变化的情况下或者如果你的查询原文每次都不同,查询缓冲也许引起性能下降而不是性能提升。
</span><span class="c1"></span><span class="n">query_cache_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">64</span><span class="n">M</span><span class="w"> 
</span><span class="w">
</span><span class="w"></span><span class="c1"># 只有小于此设定值的结果才会被缓冲，保护查询缓冲,防止一个极大的结果集将其他所有的查询结果都覆盖。
</span><span class="c1"></span><span class="n">query_cache_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="n">M</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 每个被缓存的结果集要占用的最小内存,默认值4kb，一般不怎么调整。
</span><span class="c1"># 如果Qcache_free_blocks值过大，可能是query_cache_min_res_unit值过大，应该调小些
</span><span class="c1"># query_cache_min_res_unit的估计值：(query_cache_size - Qcache_free_memory) / Qcache_queries_in_cache
</span><span class="c1"></span><span class="n">query_cache_min_res_unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="n">kb</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 在一个事务中binlog为了记录SQL状态所持有的cache大小
</span><span class="c1"># 如果你经常使用大的,多声明的事务,你可以增加此值来获取更大的性能.
</span><span class="c1"># 所有从事务来的状态都将被缓冲在binlog缓冲中然后在提交后一次性写入到binlog中
</span><span class="c1"># 如果事务比此值大, 会使用磁盘上的临时文件来替代.
</span><span class="c1"># 此缓冲在每个连接的事务第一次更新状态时被创建
</span><span class="c1"></span><span class="n">binlog_cache_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="n">M</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">#*** MyISAM 相关选项
</span><span class="c1"># 指定索引缓冲区的大小, 为MYISAM数据表开启供线程共享的索引缓存,对INNODB引擎无效。相当影响MyISAM的性能。
</span><span class="c1"># 不要将其设置大于你可用内存的30%,因为一部分内存同样被OS用来缓冲行数据
</span><span class="c1"># 甚至在你并不使用MyISAM 表的情况下, 你也需要仍旧设置起 8-64M 内存由于它同样会被内部临时磁盘表使用.
</span><span class="c1"># 默认值 8M，建议值：对于内存在4GB左右的服务器该参数可设置为256M或384M。注意：该参数值设置的过大反而会是服务器整体效率降低！
</span><span class="c1"></span><span class="n">key_buffer_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">64</span><span class="n">M</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 为每个扫描MyISAM的线程分配参数设置的内存大小缓冲区。 
</span><span class="c1"># 默认值128kb，建议值：16G内存建议1M，4G：128kb或者256kb吧
</span><span class="c1"># 注意，该缓冲区是每个连接独占的，所以总缓冲区大小为 128kb*连接数；极端情况128kb*maxconnectiosns，会超级大，所以要考虑日常平均连接数。
</span><span class="c1"># 一般不需要太关心该数值，稍微增大就可以了，
</span><span class="c1"></span><span class="n">read_buffer_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="n">M</span><span class="w"> 
</span><span class="w">
</span><span class="w"></span><span class="c1"># 支持任何存储引擎
</span><span class="c1"># MySQL的随机读缓冲区大小，适当增大，可以提高性能。
</span><span class="c1"># 默认值256kb；建议值：得参考连接数，16G内存，有人推荐8M
</span><span class="c1"># 注意，该缓冲区是每个连接独占的，所以总缓冲区大小为128kb*连接数；极端情况128kb*maxconnectiosns，会超级大，所以要考虑日常平均连接数。
</span><span class="c1"></span><span class="n">read_rnd_buffer_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="n">M</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># order by或group by时用到 
</span><span class="c1"># 支持所有引擎，innodb和myisam有自己的innodb_sort_buffer_size和myisam_sort_buffer_size设置
</span><span class="c1"># 默认值256kb；建议值：得参考连接数，16G内存，有人推荐8M.
</span><span class="c1"># 注意，该缓冲区是每个连接独占的，所以总缓冲区大小为 1M*连接数；极端情况1M*maxconnectiosns，会超级大。所以要考虑日常平均连接数。
</span><span class="c1"></span><span class="n">sort_buffer_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="n">M</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 此缓冲被使用来优化全联合(full JOINs 不带索引的联合)
</span><span class="c1"># 类似的联合在极大多数情况下有非常糟糕的性能表现,但是将此值设大能够减轻性能影响.
</span><span class="c1"># 通过 “Select_full_join” 状态变量查看全联合的数量
</span><span class="c1"># 注意，该缓冲区是每个连接独占的，所以总缓冲区大小为 1M*连接数；极端情况1M*maxconnectiosns，会超级大。所以要考虑日常平均连接数。
</span><span class="c1"># 默认值256kb;建议值：16G内存，设置8M.
</span><span class="c1"></span><span class="n">join_buffer_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="n">M</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 缓存linux文件描述符信息，加快数据文件打开速度
</span><span class="c1"># 它影响myisam表的打开关闭，但是不影响innodb表的打开关闭。
</span><span class="c1"># 默认值2000，建议值：根据状态变量Opened_tables去设定
</span><span class="c1"></span><span class="n">table_open_cache</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2000</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 缓存表定义的相关信息，加快读取表信息速度
</span><span class="c1"># 默认值1400，最大值2000，建议值：基本不改。
</span><span class="c1"></span><span class="n">table_definition_cache</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1400</span><span class="w">
</span><span class="w"></span><span class="c1"># 该参数是myssql 5.6后引入的，目的是提高并发。
</span><span class="c1"># 默认值1，建议值：cpu核数，并且&lt;=16
</span><span class="c1"></span><span class="n">table_open_cache_instances</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 当客户端断开之后，服务器处理此客户的线程将会缓存起来以响应下一个客户而不是销毁。可重用，减小了系统开销。
</span><span class="c1"># 默认值为9，建议值：两种取值方式，方式一，根据物理内存，1G  —&gt; 8；2G  —&gt; 16； 3G  —&gt; 32； &gt;3G  —&gt; 64；
</span><span class="c1"># 方式二，根据show status like  &#39;threads%&#39;，查看Threads_connected值。
</span><span class="c1"></span><span class="n">thread_cache_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 默认值256k,建议值：16/32G内存，512kb，其他一般不改变，如果报错：Thread stack overrun，就增大看看,
</span><span class="c1"># 注意，每个线程分配内存空间，所以总内存空间。。。你懂得。
</span><span class="c1"></span><span class="n">thread_stack</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">512</span><span class="n">k</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 日志文件相关设置，一般只开启三种日志，错误日志，慢查询日志，二进制日志。普通查询日志不开启。
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="c1"># 普通查询日志，默认值off，不开启
</span><span class="c1"></span><span class="n">general_log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w"></span><span class="c1"># 普通查询日志存放地址
</span><span class="c1"></span><span class="n">general_log_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">mysql</span><span class="o">-</span><span class="mi">5</span><span class="p">.</span><span class="mi">7</span><span class="p">.</span><span class="mi">21</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">mysql</span><span class="o">-</span><span class="n">general</span><span class="p">.</span><span class="n">log</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 全局动态变量，默认3，范围：1～3
</span><span class="c1"># 表示错误日志记录的信息，1：只记录error信息；2：记录error和warnings信息；3：记录error、warnings和普通的notes信息。
</span><span class="c1"></span><span class="n">log_error_verbosity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="w"></span><span class="c1"># 错误日志文件地址
</span><span class="c1"></span><span class="n">log_error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">mysql</span><span class="o">-</span><span class="mi">5</span><span class="p">.</span><span class="mi">7</span><span class="p">.</span><span class="mi">21</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">mysql</span><span class="o">-</span><span class="n">error</span><span class="p">.</span><span class="n">log</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 开启慢查询
</span><span class="c1"></span><span class="n">slow_query_log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 开启慢查询时间，此处为1秒，达到此值才记录数据
</span><span class="c1"></span><span class="n">long_query_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 检索行数达到此数值，才记录慢查询日志中
</span><span class="c1"></span><span class="n">min_examined_row_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># mysql 5.6.5新增，用来表示每分钟允许记录到slow log的且未使用索引的SQL语句次数，默认值为0，不限制。
</span><span class="c1"></span><span class="n">log_throttle_queries_not_using_indexes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 慢查询日志文件地址
</span><span class="c1"></span><span class="n">slow_query_log_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">mysql</span><span class="o">-</span><span class="n">slow</span><span class="p">.</span><span class="n">log</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 开启记录没有使用索引查询语句
</span><span class="c1"></span><span class="n">log</span><span class="o">-</span><span class="n">queries</span><span class="o">-</span><span class="k">not</span><span class="o">-</span><span class="k">using</span><span class="o">-</span><span class="n">indexes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 开启二进制日志
</span><span class="c1"></span><span class="n">log_bin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">mysql</span><span class="o">-</span><span class="n">bin</span><span class="p">.</span><span class="n">log</span><span class="w">
</span><span class="w"></span><span class="c1"># mysql清除过期日志的时间，默认值0，不自动清理，而是使用滚动循环的方式。
</span><span class="c1"></span><span class="n">expire_logs_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w"></span><span class="c1"># 如果二进制日志写入的内容超出给定值，日志就会发生滚动。你不能将该变量设置为大于1GB或小于4096字节。 默认值是1GB。
</span><span class="c1"></span><span class="n">max_binlog_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000</span><span class="n">M</span><span class="w">
</span><span class="w"></span><span class="c1"># binlog的格式也有三种：STATEMENT，ROW，MIXED。mysql 5.7.7后，默认值从 MIXED 改为 ROW
</span><span class="c1"># 关于binlog日志格式问题，请查阅网络资料
</span><span class="c1"></span><span class="n">binlog_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">row</span><span class="w">
</span><span class="w"></span><span class="c1"># 默认值N=1，使binlog在每N次binlog写入后与硬盘同步，ps：1最慢
</span><span class="c1"># sync_binlog = 1 
</span><span class="c1"></span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># innob选项
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：该参数可以提升扩展性和刷脏页性能。
</span><span class="c1"># 默认值1，建议值：4-8；并且必须小于innodb_buffer_pool_instances
</span><span class="c1"></span><span class="n">innodb_page_cleaners</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：一般8k和16k中选择，8k的话，cpu消耗小些，selcet效率高一点，一般不用改
</span><span class="c1"># 默认值：16k；建议值：不改，
</span><span class="c1"></span><span class="n">innodb_page_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16384</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：InnoDB使用一个缓冲池来保存索引和原始数据, 不像MyISAM.这里你设置越大,你在存取表里面数据时所需要的磁盘I/O越少.
</span><span class="c1"># 在一个独立使用的数据库服务器上,你可以设置这个变量到服务器物理内存大小的60%-80%
</span><span class="c1"># 注意别设置的过大，会导致system的swap空间被占用，导致操作系统变慢，从而减低sql查询的效率
</span><span class="c1"># 默认值：128M，建议值：物理内存的60%-80%
</span><span class="c1"></span><span class="n">innodb_buffer_pool_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">512</span><span class="n">M</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明:只有当设置 innodb_buffer_pool_size 值大于1G时才有意义，小于1G，instances默认为1，大于1G，instances默认为8
</span><span class="c1"># 但是网络上有评价，最佳性能，每个实例至少1G大小。
</span><span class="c1"># 默认值：1或8，建议值：innodb_buffer_pool_size/innodb_buffer_pool_instances &gt;= 1G
</span><span class="c1"></span><span class="n">innodb_buffer_pool_instances</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：mysql 5.7 新特性，defines the chunk size for online InnoDB buffer pool resizing operations.
</span><span class="c1"># 实际缓冲区大小必须为innodb_buffer_pool_chunk_size*innodb_buffer_pool_instances*倍数，取略大于innodb_buffer_pool_size
</span><span class="c1"># 默认值128M，建议值：默认值就好，乱改反而容易出问题，它会影响实际buffer pool大小。
</span><span class="c1"></span><span class="n">innodb_buffer_pool_chunk_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">128</span><span class="n">M</span><span class="w"> 
</span><span class="w">
</span><span class="w"></span><span class="c1"># 在启动时把热数据加载到内存。默认值为on，不修改
</span><span class="c1"></span><span class="n">innodb_buffer_pool_load_at_startup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w"></span><span class="c1"># 在关闭时把热数据dump到本地磁盘。默认值为on，不修改
</span><span class="c1"></span><span class="n">innodb_buffer_pool_dump_at_shutdown</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：影响Innodb缓冲区的刷新算法，建议从小到大配置，直到zero free pages；innodb_lru_scan_depth * innodb_buffer_pool_instances defines the amount of work performed by the page cleaner thread each second.
</span><span class="c1"># 默认值1024，建议值: 未知
</span><span class="c1"></span><span class="n">innodb_lru_scan_depth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1024</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：事务等待获取资源等待的最长时间，单位为秒，看具体业务情况，一般默认值就好
</span><span class="c1"># 默认值：50，建议值：看业务。
</span><span class="c1"></span><span class="n">innodb_lock_wait_timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">60</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：设置了Mysql后台任务（例如页刷新和merge dadta from buffer pool）每秒io操作的上限。
</span><span class="c1"># 默认值：200，建议值：方法一，单盘sata设100，sas10，raid10设200，ssd设2000，fushion-io设50000；方法二，通过测试工具获得磁盘io性能后，设置IOPS数值/2。
</span><span class="c1"></span><span class="n">innodb_io_capacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2000</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：该参数是所有缓冲区线程io操作的总上限。
</span><span class="c1"># 默认值：innodb_io_capacity的两倍。建议值：例如用iometer测试后的iops数值就好
</span><span class="c1"></span><span class="n">innodb_io_capacity_max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4000</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：控制着innodb数据文件及redo log的打开、刷写模式，三种模式：fdatasync(默认)，O_DSYNC，O_DIRECT
</span><span class="c1"># fdatasync：数据文件，buffer pool-&gt;os buffer-&gt;磁盘；日志文件，buffer pool-&gt;os buffer-&gt;磁盘；
</span><span class="c1"># O_DSYNC：  数据文件，buffer pool-&gt;os buffer-&gt;磁盘；日志文件，buffer pool-&gt;磁盘；
</span><span class="c1"># O_DIRECT： 数据文件，buffer pool-&gt;磁盘；           日志文件，buffer pool-&gt;os buffer-&gt;磁盘；
</span><span class="c1"># 默认值为空，建议值：使用SAN或者raid，建议用O_DIRECT，不懂测试的话，默认生产上使用O_DIRECT
</span><span class="c1"></span><span class="n">innodb_flush_method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">O_DIRECT</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：mysql5.7之后默认开启，意思是，每张表一个独立表空间。
</span><span class="c1"># 默认值1，开启
</span><span class="c1"></span><span class="n">innodb_file_per_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：The path where InnoDB creates undo tablespaces.通常等于undo log文件的存放目录。
</span><span class="c1"># 默认值./;自行设置
</span><span class="c1"></span><span class="n">innodb_undo_directory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">mysql</span><span class="o">-</span><span class="mi">5</span><span class="p">.</span><span class="mi">7</span><span class="p">.</span><span class="mi">21</span><span class="o">/</span><span class="n">log</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：The number of undo tablespaces used by InnoDB.等于undo log文件数量。5.7.21后开始弃用
</span><span class="c1"># 默认值为0，建议默认值就好，不用调整了。
</span><span class="c1"></span><span class="n">innodb_undo_tablespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：定义undo使用的回滚段数量。5.7.19后弃用
</span><span class="c1"># 默认值128，建议不动，以后弃用了。
</span><span class="c1"></span><span class="n">innodb_undo_logs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">128</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：5.7.5后开始使用，在线收缩undo log使用的空间。
</span><span class="c1"># 默认值：关闭，建议值：开启
</span><span class="c1"></span><span class="n">innodb_undo_log_truncate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：结合innodb_undo_log_truncate，实现undo空间收缩功能
</span><span class="c1"># 默认值：1G，建议值，不改。
</span><span class="c1"></span><span class="n">innodb_max_undo_log_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="n">G</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：重作日志文件的存放目录
</span><span class="c1"></span><span class="n">innodb_log_group_home_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">mysql</span><span class="o">-</span><span class="mi">5</span><span class="p">.</span><span class="mi">7</span><span class="p">.</span><span class="mi">21</span><span class="o">/</span><span class="n">log</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：日志文件的大小
</span><span class="c1"># 默认值:48M,建议值：根据你系统的磁盘空间和日志增长情况调整大小
</span><span class="c1"></span><span class="n">innodb_log_file_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">128</span><span class="n">M</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：日志组中的文件数量，mysql以循环方式写入日志
</span><span class="c1"># 默认值2，建议值：根据你系统的磁盘空间和日志增长情况调整大小
</span><span class="c1"></span><span class="n">innodb_log_files_in_group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="w">
</span><span class="w"></span><span class="c1"># 此参数确定些日志文件所用的内存大小，以M为单位。缓冲区更大能提高性能，但意外的故障将会丢失数据。MySQL开发人员建议设置为1－8M之间
</span><span class="c1"></span><span class="n">innodb_log_buffer_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="n">M</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：可以控制log从系统buffer刷入磁盘文件的刷新频率，增大可减轻系统负荷
</span><span class="c1"># 默认值是1；建议值不改。系统性能一般够用。
</span><span class="c1"></span><span class="n">innodb_flush_log_at_timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：参数可设为0，1，2；
</span><span class="c1"># 参数0：表示每秒将log buffer内容刷新到系统buffer中，再调用系统flush操作写入磁盘文件。
</span><span class="c1"># 参数1：表示每次事物提交，将log buffer内容刷新到系统buffer中，再调用系统flush操作写入磁盘文件。
</span><span class="c1"># 参数2：表示每次事物提交，将log buffer内容刷新到系统buffer中，隔1秒后再调用系统flush操作写入磁盘文件。
</span><span class="c1"></span><span class="n">innodb_flush_log_at_trx_commit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：限制Innodb能打开的表的数据，如果库里的表特别多的情况，请增加这个。
</span><span class="c1"># 值默认是2000，建议值：参考数据库表总数再进行调整，一般够用不用调整。
</span><span class="c1"></span><span class="n">innodb_open_files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8192</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># innodb处理io读写的后台并发线程数量，根据cpu核来确认，取值范围：1-64
</span><span class="c1"># 默认值：4，建议值：与逻辑cpu数量的一半保持一致。
</span><span class="c1"></span><span class="n">innodb_read_io_threads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w">
</span><span class="w"></span><span class="n">innodb_write_io_threads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w">
</span><span class="w"></span><span class="c1"># 默认设置为 0,表示不限制并发数，这里推荐设置为0，更好去发挥CPU多核处理能力，提高并发量
</span><span class="c1"></span><span class="n">innodb_thread_concurrency</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w"></span><span class="c1"># 默认值为4，建议不变。InnoDB中的清除操作是一类定期回收无用数据的操作。mysql 5.5之后，支持多线程清除操作。
</span><span class="c1"></span><span class="n">innodb_purge_threads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w"> 
</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：mysql缓冲区分为new blocks和old blocks；此参数表示old blocks占比；
</span><span class="c1"># 默认值：37，建议值，一般不动
</span><span class="c1"></span><span class="n">innodb_old_blocks_pct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">37</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：新数据被载入缓冲池，进入old pages链区，当1秒后再次访问，则提升进入new pages链区。
</span><span class="c1"># 默认值：1000
</span><span class="c1"></span><span class="n">innodb_old_blocks_time</span><span class="o">=</span><span class="mi">1000</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：开启异步io，可以提高并发性，默认开启。
</span><span class="c1"># 默认值为1，建议不动
</span><span class="c1"></span><span class="n">innodb_use_native_aio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：默认为空，使用data目录，一般不改。
</span><span class="c1"></span><span class="n">innodb_data_home_dir</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">mysql</span><span class="o">-</span><span class="mi">5</span><span class="p">.</span><span class="mi">7</span><span class="p">.</span><span class="mi">21</span><span class="o">/</span><span class="n">data</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：Defines the name, size, and attributes of InnoDB system tablespace data files.
</span><span class="c1"># 默认值，不指定，默认为ibdata1:12M:autoextend
</span><span class="c1"></span><span class="n">innodb_data_file_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ibdata1</span><span class="p">:</span><span class="mi">12</span><span class="n">M</span><span class="p">:</span><span class="n">autoextend</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明:设置了InnoDB存储引擎用来存放数据字典信息以及一些内部数据结构的内存空间大小,除非你的数据对象及其多，否则一般默认不改。
</span><span class="c1"># innodb_additional_mem_pool_size = 16M
</span><span class="c1"></span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1"># 说明：The crash recovery mode。只有紧急情况需要恢复数据的时候，才改为大于1-6之间数值，含义查下官网。
</span><span class="c1"># 默认值为0；
</span><span class="c1">#innodb_force_recovery = 0
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="c1">##########################################################################################################
</span><span class="c1"># 其他。。。。
</span><span class="c1"># 参考http://www.kuqin.com/database/20120815/328905.html
</span><span class="c1"># skip-external-locking
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="c1"># 禁止MySQL对外部连接进行DNS解析，使用这一选项可以消除MySQL进行DNS解析的时间。
</span><span class="c1"># 缺点：所有远程主机连接授权都要使用IP地址方式，因为只认得ip地址了。
</span><span class="c1"># skip_name_resolve = 0
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="c1"># 默认值为off,timestamp列会自动更新为当前时间，设置为on|1，timestamp列的值就要显式更新
</span><span class="c1"></span><span class="n">explicit_defaults_for_timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="p">[</span><span class="n">mysqldump</span><span class="p">]</span><span class="w">
</span><span class="w"></span><span class="c1"># quick选项强制 mysqldump 从服务器查询取得记录直接输出而不是取得所有记录后将它们缓存到内存中
</span><span class="c1"></span><span class="n">quick</span><span class="w">
</span><span class="w"></span><span class="n">max_allowed_packet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="n">M</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="p">[</span><span class="n">mysql</span><span class="p">]</span><span class="w">
</span><span class="w"></span><span class="c1"># mysql命令行工具不使用自动补全功能，建议还是改为
</span><span class="c1"># no-auto-rehash
</span><span class="c1"></span><span class="n">auto</span><span class="o">-</span><span class="n">rehash</span><span class="w">
</span><span class="w"></span><span class="n">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">mysql</span><span class="p">.</span><span class="n">sock</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div>
    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/mysql/">mysql</a>
          <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
          <a href="/tags/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/">配置文件</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%B9%E6%B3%95%E9%83%A8%E7%BD%B2k8s%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">虚拟机二进制方法部署K8S生产环境</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/redis%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/">
            <span class="next-text nav-default">Redis配置文件详解</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  
  <div id="vcomments"></div>
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
  <script type="text/javascript">
    new Valine({
        el: '#vcomments' ,
        appId: 'xejwJ1mqtIJ6JAnKlCXzHODQ-gzGzoHsz',
        appKey: 'WGB8ABQxGRsIT5gndRGMIMxg',
        notify:  false ,
        verify:  false ,
        avatar:'mm',
        placeholder: '说点什么吧...',
        visitor:  false 
    });
  </script>

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:your@email.com" class="iconfont icon-email" title="email"></a>
      <a href="http://localhost:1313" class="iconfont icon-twitter" title="twitter"></a>
      <a href="http://localhost:1313" class="iconfont icon-facebook" title="facebook"></a>
      <a href="http://localhost:1313" class="iconfont icon-github" title="github"></a>
      <a href="http://localhost:1313" class="iconfont icon-weibo" title="weibo"></a>
      <a href="http://localhost:1313" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="http://localhost:1313" class="iconfont icon-douban" title="douban"></a>
      <a href="http://localhost:1313" class="iconfont icon-pocket" title="pocket"></a>
      <a href="http://localhost:1313" class="iconfont icon-instagram" title="instagram"></a>
      <a href="http://localhost:1313" class="iconfont icon-gitlab" title="gitlab"></a>
      <a href="http://localhost:1313" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="https://wyc1282.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021<span class="heart"><i class="iconfont icon-heart"></i></span><span>Wang</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>








</body>
</html>
